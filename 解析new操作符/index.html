<!DOCTYPE html>
<html>
<head>
	<title>new操作符解析</title>
	<meta charset="utf-8">
	<meta name="keywords" content="new操作符解析">
</head>
<body>
	<script type="text/javascript">

		// 访问到wy 构造函数里面的属性
		// 访问到wy 原型上的属性
		
		function WY(name, age){
			this.name = name;
			this.age = age;
		}

		WY.prototype.ablility = 100;

		WY.prototype.sayName = function(){
			console.log("hello" + this.name);
			return "hello " + this.name;
		}

		var person = newWY(WY, "yfx", 20);
		
		console.log(person.name);
		console.log(person.age);
		console.log(person.ablility);
		person.sayName();

		// function newWY(){
		// 	var obj = {};
		// 	var Constructor = [].shift.call(arguments);
		// 	obj.__proto___ =  Constructor.prototype;
		// 	var result = Constructor.apply(obj, arguments);
		// 	return typeof result === "object" ? result || obj : obj;
		// }

		// new 的原理 返回值是引用对象，是原始值，是null 三种情况分类
		function newWY(){	
			var Constructor = [].shift.call(arguments);	
			var obj = Object.create(Constructor.prototype);  // 原型链的属性和方法，访问不到
			var result = Constructor.apply(obj, arguments);
			return typeof result === "object" ? result || obj : obj;
		}
		
		// typeof null = "Object"
	</script>
</body>
</html>